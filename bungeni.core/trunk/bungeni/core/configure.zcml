<configure xmlns="http://namespaces.zope.org/zope"
           xmlns:browser="http://namespaces.zope.org/browser"           
           xmlns:db="http://namespaces.objectrealms.net/rdb"
           i18n_domain="bungeni">

  <!-- Setup Database Connection -->	  
  <db:engine
     name="bungeni-db"
     url="postgres://localhost/bungeni"
     />

  <!-- Bind Application Model to Database -->
  <db:bind
     engine="bungeni-db"
     metadata=".schema.metadata" />

  <!-- Catalyze Domain Models -->
  <db:catalyst
     class=".domain.Bill"
     descriptor=".descriptor.BillDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"
     />

  <db:catalyst
     class=".domain.Motion"
     descriptor=".descriptor.MotionDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"     
     />
     
  <db:catalyst
     class=".domain.Government"
     descriptor=".descriptor.GovernmentDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"     
     />     
     
  <db:catalyst
     class=".domain.Parliament"
     descriptor=".descriptor.ParliamentDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"     
     />     

  <db:catalyst
     class=".domain.ParliamentMember"
     descriptor=".descriptor.MemberDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"     
     />     

  <db:catalyst
     class=".domain.Committee"
     descriptor=".descriptor.CommitteeDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"     
     />     
     
  <db:catalyst
     class=".domain.ParliamentSession"
     descriptor=".descriptor.SessionDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"
     />     

  <db:catalyst
     class=".domain.GroupSitting"
     descriptor=".descriptor.SittingDescriptor"
     interface_module=".interfaces"
     ui_module="bungeni.ui.content"     
     />               
     
  <!-- Application Setup Handler -->
  <subscriber
     for=".interfaces.IBungeniApplication
          ore.wsgiapp.interfaces.IWSGIApplicationCreatedEvent"
     handler=".app.setUpSubscriber"
     />

  <!-- Authentication Utility -->
  <utility
     provides="zope.app.authentication.interfaces.IAuthenticatorPlugin"
     factory=".auth.DatabaseAuthentication"
     name="rdb-auth"
     />

  <!-- Application to publish -->
  <utility
     provides="ore.wsgiapp.interfaces.IApplication"
     factory=".app.BungeniApp"
     />

  <adapter
     for=".interfaces.IBungeniApplication"
     factory=".app.AppSetup"
     />

  <class 
     class=".app.BungeniApp">
     <allow interface="zope.app.container.interfaces.IReadContainer" />
  </class>

</configure>
