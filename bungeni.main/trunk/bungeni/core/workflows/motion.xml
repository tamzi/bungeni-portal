<?xml version="1.0"?>
<workflow id="motion-workflow" 
    title="Motion Workflow" 
    description="A Motion" 
    domain="bungeni.ui"
    initial_state="">
    
    <!--
    
    - the order of appearance of permission actions (for appropriate actions):
        View
        Edit
        Add
        Delete
    - the order of role appearance in a state's permission directives:
        <role id="bungeni.Clerk" title="Clerks Office" />
        <role id="bungeni.Speaker" title="Speaker Office" />
        <role id="bungeni.Owner" title="Owner" />
        <role id="bungeni.MP" title="Member of parliament" />
        <role id="bungeni.Minister" title="Minister" />
        <role id="bungeni.Everybody" title="All authenticated users" />
        <role id="bungeni.Anybody" title="Bungeni Visitor" />
    - for a motion, the MP is also the Owner
    - denying zope.View on a Role seems to deny every other permission !+??
    
    -->
    
    <state id="working_draft" title="Working Draft">
        
        <!-- motion -->
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Speaker" />
        <deny permission="zope.View" role="bungeni.Owner" />
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />
        
        <grant permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <grant permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />
        
        <grant permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <grant permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />
        
        <!-- cosignatory -->
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />
        
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />
        
        <!-- fileattachment -->
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
        
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />
        
    </state>
    
    <state id="draft" title="Draft" like_state="working_draft">

        <!-- motion -->
        <deny permission="zope.View" role="bungeni.Clerk" />
        <deny permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Owner" />
        
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <grant permission="bungeni.motion.Edit" role="bungeni.Owner" />
        
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <grant permission="bungeni.motion.Delete" role="bungeni.Owner" />
        
        <!-- cosignatory -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        
        <!-- fileattachment -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        
    </state>


    <state id="submitted" title="Submitted">
        <!-- view -->
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <!--deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- cosignatory add -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosignatory delete -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- motion edit -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att delete -->
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Delete" role="bungeni.Anybody" />
    </state>


    <state id="received" title="Received by Clerks Office">
        <!-- view -->
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- cosignatory add -->
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosig delete -->
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- motion edit -->
        <grant permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />


        <!-- file att add -->
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>


    <state id="clarify_mp" title="Needs Clarification by MP">
        <!-- view -->
        <grant permission="zope.View" role="bungeni.Owner" />
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Speaker" />
        <!-- deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- motion edit -->
        <grant permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <!-- deny -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- cosig add -->
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosig del -->
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>


    <state id="complete" title="Submitted to the Speaker">
        <!-- view -->
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- motion edit -->
        <grant permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- cosign add -->
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosign delete -->
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>


    <state id="clarify_clerk" title="Needs Clarification by Clerks Office">
        <!-- view -->
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- motion edit -->
        <grant permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- cosign add -->
        <grant permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosign delete -->
        <grant permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <grant permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <grant permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>


    <state id="withdrawn" title="Withdrawn">
        <!--view -->
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- motion edit -->
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <!-- deny -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- cosig add -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosig del -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>


    <state id="inadmissible" title="Inadmissible">
        <!-- view -->
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <!-- deny -->
        <deny permission="zope.View" role="bungeni.MP" />
        <deny permission="zope.View" role="bungeni.Minister" />
        <deny permission="zope.View" role="bungeni.Everybody" />
        <deny permission="zope.View" role="bungeni.Anybody" />

        <!-- motion edit -->
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- cosign add -->
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosign delete -->
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <!-- deny -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>


    <state id="admissible" title="Admissible">
        <!-- zope view -->
        <!-- deny -->
        <grant permission="zope.View" role="bungeni.Everybody" />
        <grant permission="zope.View" role="bungeni.Anybody" />
        <grant permission="zope.View" role="bungeni.Clerk" />
        <grant permission="zope.View" role="bungeni.Owner" />
        <grant permission="zope.View" role="bungeni.Speaker" />
        <grant permission="zope.View" role="bungeni.MP" />
        <grant permission="zope.View" role="bungeni.Minister" />

        <!-- motion edit -->
        <!-- deny -->
        <deny permission="bungeni.motion.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Edit" role="bungeni.MP" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Edit" role="bungeni.Anybody" />

        <!-- motion delete -->
        <!-- deny -->
        <deny permission="bungeni.motion.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.motion.Delete" role="bungeni.MP" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.motion.Delete" role="bungeni.Anybody" />

        <!-- cosign add -->
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Add" role="bungeni.Anybody" />

        <!-- cosign delete -->
        <!-- deny -->
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Speaker" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Clerk" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Owner" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.MP" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Minister" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Everybody" />
        <deny permission="bungeni.cosignatory.Delete" role="bungeni.Anybody" />

        <!-- file att add -->
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Add" role="bungeni.Anybody" />

        <!-- file att edit -->
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Speaker" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Clerk" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Owner" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.MP" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Minister" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Everybody" />
        <deny permission="bungeni.fileattachment.Edit" role="bungeni.Anybody" />
    </state>

    <!-- FLAVIO: from here onward they alll keep the very same permission as in ADMISSIBLE, so they are all empty-->

    <state id="schedule_pending" title="Schedule pending">
       
    </state>


    <!-- is scheduled for debate at a sitting -->
    <state id="scheduled" title="Scheduled">

    </state>


    <!-- admissable motion that cannot be debated -->
    <state id="deferred" title="Deferred">
       
    </state>


    <!--motion was scheduled for but droped, becuase no show of MP etc -->
    <state id="dropped" title="Dropped">

    </state>


    <state id="adopted" title="Adopted">
       
    </state>


    <state id="adopted_amendments" title="Adopted with amendments">
     
    </state>


    <state id="rejected" title="Rejected">
      
    </state>


    <!--defered motion that was not debated -->
    <state id="elapsed" title="Elapsed">
       
    </state>

    <!--a motion was debated and the debate adjourned  -->
    <state id="debate_adjourned" title="Debate adjourned">
        <!-- ASHOK*** accquires permissions from previous state-->
    </state>


    <state id="withdrawn_public" title="Withdrawn">

    </state>


    <!-- transitions - transitions -transitions -transitions - transitions -transitions -->

    <transition id="create" title="Create Motion" trigger="automatic" source="" destination="draft"
        permission="" action="bungeni.core.workflows.motion.actions.create"
        condition="bungeni.core.workflows.utils.conditions.user_is_context_owner" />

    <transition id="create_on_behalf_of" title="Create Motion (On behalf of)" trigger="automatic"
        source="" destination="working_draft" action="bungeni.core.workflows.motion.actions.create"
        condition="bungeni.core.workflows.utils.conditions.user_is_not_context_owner" />


    <transition id="submit_to_clerk" title="Submit to Clerk" trigger="manual"
        source="working_draft draft" destination="submitted" permission="bungeni.motion.wf.submit_to_reviewer"
        action="bungeni.core.workflows.motion.actions.submit" condition=""
        event="bungeni.core.workflows.interfaces.IMotionSubmittedEvent" />


    <transition id="received_by_clerk" title="Receive" trigger="manual" source="submitted"
        destination="received" permission="bungeni.motion.wf.received_by_reviewer"
        action="bungeni.core.workflows.motion.actions.received_by_clerk" condition=""
        event="bungeni.core.workflows.interfaces.IMotionReceivedEvent" />

  
    <transition id="require_edit_by_mp" title="Needs Clarification by MP" trigger="manual"
        source="received" destination="clarify_mp" permission="bungeni.motion.wf.return_to_owner"
        action="bungeni.core.workflows.motion.actions.require_edit_by_mp" condition=""
        event="bungeni.core.workflows.interfaces.IMotionClarifyEvent" require_confirmation="true" />

 
    <transition id="complete" title="Submit to the Speaker Office" trigger="manual"
        source="received" destination="complete" permission="bungeni.motion.wf.submit_to_reviewer2"
        action="bungeni.core.workflows.motion.actions.complete" condition="" />

   
    <transition id="approve" title="Approve" trigger="manual" source="complete"
        destination="admissible" permission="bungeni.motion.wf.approve"
        action="bungeni.core.workflows.motion.actions.approve" condition="" />

   

    <transition id="allow_schedule" title="Make available for scheduling" trigger="manual"
        source="admissible deferred debate_adjourned" destination="schedule_pending"
        permission="bungeni.motion.wf.schedule_pending" action=""
        event="bungeni.core.workflows.interfaces.IMotionPendingEvent" />


   
    <transition id="reject" title="Reject" trigger="manual" source="complete"
        destination="inadmissible" permission="bungeni.motion.wf.reject"
        action="bungeni.core.workflows.motion.actions.reject" condition=""
        event="bungeni.core.workflows.interfaces.IMotionRejectedEvent" require_confirmation="true" />

 
    <transition id="require_amendment" title="Needs Clarification" trigger="manual"
        source="complete" destination="clarify_clerk" permission="bungeni.motion.wf.return_to_reviewer"
        action="bungeni.core.workflows.motion.actions.require_amendment" condition=""
        require_confirmation="true" />

   
    <transition id="complete_clarify" title="Complete" trigger="manual" source="clarify_clerk"
        destination="complete" permission="bungeni.motion.wf.mark_complete" action="" condition="" />

  
    <transition id="mp_clarify" title="Needs Clarification by MP" trigger="manual"
        source="clarify_clerk" destination="clarify_mp" permission="bungeni.motion.wf.return_to_owner"
        action="bungeni.core.workflows.motion.actions.mp_clarify" condition=""
        event="bungeni.core.workflows.interfaces.IMotionClarifyEvent" require_confirmation="true" />

   
    <transition id="resubmit_clerk" title="Resubmit to clerk" trigger="manual" source="clarify_mp"
        destination="submitted" permission="bungeni.motion.wf.submit_to_reviewer"
        action="bungeni.core.workflows.motion.actions.submit" condition="" />

   
    <transition id="defer" title="Defer" trigger="manual" source="admissible" destination="deferred"
        permission="bungeni.motion.wf.defer" action="bungeni.core.workflows.motion.actions.defer"
        condition="" event="bungeni.core.workflows.interfaces.IMotionDeferredEvent" />

   
    <transition id="elapse_defered" title="Elapse" trigger="manual" source="deferred"
        destination="elapsed" permission="bungeni.motion.wf.mark_elapse"
        action="bungeni.core.workflows.motion.actions.elapse" condition=""
        require_confirmation="true" />

    
    <transition id="schedule" title="Schedule" trigger="system" source="schedule_pending"
        destination="scheduled" permission="bungeni.motion.wf.schedule"
        action="bungeni.core.workflows.motion.actions.schedule"
        condition="bungeni.core.workflows.motion.conditions.is_scheduled"
        event="bungeni.core.workflows.interfaces.IMotionScheduledEvent" />

   
    <transition id="reschedule" title="Reschedule" trigger="system" source="scheduled"
        destination="schedule_pending" permission="bungeni.motion.wf.schedule_pending" condition="" />

   
    <transition id="revert_to_admissible" title="Revert to admissible" trigger="manual"
        source="schedule_pending" destination="admissible" permission="bungeni.motion.wf.approve"
        action="bungeni.core.workflows.motion.actions.revert_to_admissible" condition="" />

   
    <transition id="drop" title="Drop" trigger="manual" source="scheduled" destination="dropped"
        permission="bungeni.motion.wf.drop" action="" condition=""
        event="bungeni.core.workflows.interfaces.IMotionDroppedEvent" />

   
    <transition id="continue_debate" title="Debate adjourned" trigger="manual" source="scheduled"
        destination="debate_adjourned" permission="bungeni.motion.wf.adjourn_debate" condition="" event="" />

   
    <transition id="withdraw" title="Withdraw" trigger="manual"
        source="submitted
                received
                complete
                clarify_mp"
        destination="withdrawn" permission="bungeni.motion.wf.withdraw"
        action="bungeni.core.workflows.motion.actions.withdraw" condition=""
        require_confirmation="true" />

   
    <transition id="withdraw_public" title="Withdraw" trigger="manual"
        source="admissible
                scheduled
                deferred
                debate_adjourned
                schedule_pending"
        destination="withdrawn_public" permission="bungeni.motion.wf.withdraw"
        action="bungeni.core.workflows.motion.actions.withdraw" condition=""
        require_confirmation="true" />

   
    <transition id="adopt" title="Adopt" trigger="manual" source="scheduled" destination="adopted"
        permission="bungeni.motion.wf.adopt"
        action="bungeni.core.workflows.motion.actions.adopt" condition=""
        event="bungeni.core.workflows.interfaces.IMotionAdoptedEvent" require_confirmation="true" />

   
    <transition id="adopt_amendments" title="Adopt with amendments" trigger="manual"
        source="scheduled" destination="adopted_amendments" permission="bungeni.motion.wf.adopt"
        action="bungeni.core.workflows.motion.actions.adopt" condition=""
        event="bungeni.core.workflows.interfaces.IMotionAdoptedEvent" require_confirmation="true" />


    <transition id="scheduled_reject" title="Reject" trigger="manual" source="scheduled"
        destination="rejected" permission="bungeni.motion.wf.reject"
        action="bungeni.core.workflows.motion.actions.reject" condition=""
        event="bungeni.core.workflows.interfaces.IMotionRejectedEvent" require_confirmation="true" />

</workflow>
