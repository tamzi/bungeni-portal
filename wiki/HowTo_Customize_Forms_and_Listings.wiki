#summary How to Customize forms and listings
#labels bungeni-wiki

<wiki:toc max_depth="4" />

= Introduction =

Bungeni forms and listings can be customized using an xml configuration file. This page documents how to customize the listings

= ui.xml =

The main access point to customize forms and listings is the ui.xml file.

This file can be found within the bungeni customization folder in a folder called forms.

i.e. if your bungeni customization folder is in `src/bungeni_custom` - then this file can be found under `src/bungeni_custom/forms/ui.xml`.

All the information in ui.xml is contained within the `<ui>` element.

{{{
<ui roles="bungeni.Clerk bungeni.Speaker bungeni.MP bungeni.Minister bungeni.Anonymous">
.....
<descriptor ....>
....
</ui>
}}}

The `<ui>` element defines a `@roles` attribute :
{{{
<ui roles="bungeni.Clerk bungeni.Speaker bungeni.MP bungeni.Minister bungeni.Anonymous"  >
....
}}}

*This `ui/@roles` attribute is purely for reference purposes and cannot be modified.*


== Forms == 

Forms in Bungeni are used to add, view or edit Bungeni content. 

In the ui.xml file all the forms are defined within the `<ui>` element.

e.g.
{{{
<ui roles="bungeni.Clerk bungeni.Speaker bungeni.MP bungeni.Minister bungeni.Anonymous">

    <descriptor name="AgendaItem">
        <field name="parliament_id" displayable="view listing" localizable="view listing">
            <hide modes="view listing" />
        </field>
    ......
    </descriptor>

    <descriptor name="Question">
        <field name="parliament_id" displayable="view listing" localizable="view listing">
            <hide modes="view listing" />
        </field>
    ......
    </descriptor>

</ui>

}}}

A Form in bungeni is called a *descriptor*, and is contained by the `<descriptor>` element.

The `<descriptor>` has a name attribute:

{{{

<descriptor name="Question >
...
</descriptor>
}}}

This `descriptor/@name` attribute identifies the name of the Form.


== Form Modes == 

Bungeni forms support presenting content in four different modes :

 * *add* - When new content is being added. e.g. if a member of parliament is adding a new question.
 * *edit* - When existing content is being edited . e.g. if a clerk is editing a question submitted by a Member of parliament.
 * *view* - When existing content is being viewed. e.g. if a public user is viewing a question on Bungeni.
 * *listing* - This mode is used when listing the content. e.g. if you go into the the page listing all the questions in the system, the question is dispalyed in the list based on the rules defined for this mode.


== Form Fields ==

Fields on a form are identified by the `<field>` element.

Below are some of the fields in a *Question* form.

{{{
    <descriptor name="Question">
        <field name="parliament_id" displayable="view listing" localizable="view listing">
            <hide modes="view listing" />   <=== parliament id field
        </field>
        <field name="short_name" displayable="view edit add listing" localizable="view edit listing">
            <show modes="view edit listing" /> <=== short name field
        </field>
        <field name="full_name" displayable="view edit add" localizable="view edit add">
            <show modes="view edit add" /> <== full name field 
        </field>
        <field name="registry_number" displayable="view edit listing" localizable="view edit listing">
            <show modes="view" />
            <hide modes="edit listing" /> <=== registry number
        </field>
        ......
    </descriptor>
}}}

Each of these corresponds to a field on a Question form :

[http://bungeni-portal.googlecode.com/files/add_question.png]

The behavior of form fields is controllable via a combination of roles and [#Form_modes modes].

The `<field>` element has the following attributes :

 * _name_ - the `field/@name' attribute identifies the name of the field. *You are not allowed to change the name of the field* :
          {{{
           ..
           <field name="parliament_id" ... 
          }}}
 * _displayable_ - the `field/@displayable` attribute identifies in which [#Form_modes modes] the field *MAY* be localizable. *You are not allowed to change the values in  displayable*
 * _localizable_ - the `field/@localizable` attribute identifies the actual modes in which [#Form_modes modes] the field *CAN* be localizable. This is always a sub-set of modes listed in `field/@displayable`. *You are allowed to change the modes listed as `localizable`.* You are allowed to remove modes listed here, but you can only add modes that appear in the *field/@displayable` attribute.
 
Let us explain the difference between `field/@displayable` and `field/@localizable` using an example :

The following states that the `registry_number` field *MAY* be localized in "view edit listing" modes ; and it *CAN* be localized also in "view edit listing" modes.

{{{
        <field name="registry_number" 
        displayable="view edit listing"  <<-- modes that MAY be localized
        localizable="view edit listing"  <<-- modes that CAN be localized
        >
}}}

The following states that the `registry_number` field *MAY* be localized in "view edit listing" modes ; and it *CAN* be localized *only* "view" mode.

{{{
        <field name="registry_number" 
            displayable="view edit listing" <<-- modes that MAY be localized
            localizable="view"              <<-- modes that CAN be localized
            >
}}}

The following usage is *incorrect* . Why ? because "add" mode is not in the list of `displayable` modes.

{{{
        <field name="registry_number" 
            displayable="view edit listing" <<-- modes that MAY be localized
            localizable="view add"          <<-- INCORRECT; "add" mode is not specified as 'displayable'
            >
}}}



